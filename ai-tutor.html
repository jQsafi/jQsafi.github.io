<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ai Tutor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.0/lib/marked.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/SplitText.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50 0C22.4 0 0 22.4 0 50s22.4 50 50 50 50-22.4 50-50S77.6 0 50 0zm0 85C30.6 85 15 69.4 15 50S30.6 15 50 15s35 15.6 35 35-15.6 35-35 35z' fill='%234285F4'/%3E%3Cpath d='M68.8 30.8L54.6 45c-.8.8-2 1.3-3.2 1.3-.8 0-1.6-.3-2.2-.8L31.2 29.5c-.6-.5-.9-1.3-.9-2.1 0-1.5 1.2-2.7 2.7-2.7h34.1c1.5 0 2.7 1.2 2.7 2.7 0 .8-.3 1.6-.9 2.1z' fill='%23fff'/%3E%3Cpath d='M48.7 52.2l-1.1 14.6c-.1 1.3.9 2.4 2.2 2.4.5 0 1-.2 1.4-.5l12.3-9.7c.7-.6 1-1.5.7-2.4-.5-1-1.5-1.3-2.4-.8l-8.7 6.9z' fill='%23fff'/%3E%3C/svg%3E">
    <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
>
    <style>
        body {
            font-family: 'Google Sans', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #f3f4f7;
        }
        .container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .chat-container {
            flex: 0 0 auto;
            width: 100%;
            max-width: 600px;
            margin: auto;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #fff;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }
        .chat-header {
            flex: 0 0 auto;
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            background: #fff;
            color: #202124;
            display: flex;
            align-items: center;
        }
        .chat-header h1 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 500;
        }
        .chat-header span {
            margin-left: 0.75rem;
            font-size: 0.875rem;
            color: #5f6368;
        }
        .chat-messages {
            flex: 1 1 auto;
            overflow-y: auto;
            padding: 1rem 1.5rem;
        }
        .chat-input-area {
            flex: 0 0 auto;
            padding: 1.25rem 1.5rem;
            border-top: 1px solid #e2e8f0;
            background-color: #fff;
            display: flex;
        }
        .message {
            padding: 0.75rem 1rem;
            border-radius: 1.5rem;
            margin-bottom: 0.75rem;
            max-width: 90%;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            font-size: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .message:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .sent-message {
            background: linear-gradient(90deg, #b0e0e6 0%, #87cefa 100%);  /* Light Blue */
            color: #00008b;
            margin-left: auto;
            border-top-right-radius: 0.25rem;
            border-bottom-right-radius: 0.25rem;
        }
        .received-message {
            background: linear-gradient(90deg, #dda0dd 0%, #d8bfd8 100%);  /* Light Purple */
            color: #4b0082;
            margin-right: auto;
            border-top-left-radius: 0.25rem;
            border-bottom-left-radius: 0.25rem;
        }
        #message-input {
            flex: 1;
            border-radius: 2rem;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            height: 3rem;
            font-size: 1rem;
            border: 1px solid #e0e0e0;
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        #message-input:focus {
            border-color: #1a73e8;
            box-shadow: 0 0 0 4px rgba(26, 115, 232, 0.1);
        }
        #send-button {
            border-radius: 2rem;
            padding-left: 1.75rem;
            padding-right: 1.75rem;
            height: 3rem;
            font-size: 1rem;
            background-image: linear-gradient(to right, #b0e0e6, #87cefa); /* Light Blue Gradient */
            color: #fff;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }
        #send-button:hover {
            background-image: linear-gradient(to right, #add8e6, #87ceeb);
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }
        #send-button:active {
            background-image: linear-gradient(to right, #a9d3d1, #7ec0ee);
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        #message-input::placeholder {
            color: #9b9b9b;
            font-size: 1rem;
        }
        .markdown-body {
            font-family: 'Google Sans', sans-serif;
            font-size: 1rem;
            line-height: 1.75;
            color: #202124;
        }
        .markdown-body h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #202124;
            font-weight: 700;
        }
        .markdown-body h2 {
            font-size: 2rem;
            margin-bottom: 0.8rem;
            color: #202124;
            font-weight: 600;
        }
        .markdown-body h3 {
            font-size: 1.5rem;
            margin-bottom: 0.6rem;
            color: #202124;
            font-weight: 500;
        }
        .markdown-body p {
            margin-bottom: 1rem;
        }
        .markdown-body strong {
            font-weight: 600;
            color: #202124;
        }
        .markdown-body a {
            color: #1a73e8;
            text-decoration: none;
        }
        .markdown-body a:hover {
            text-decoration: underline;
        }
        .markdown-body ul {
            list-style-type: disc;
            padding-left: 2em;
            margin-bottom: 1em;
        }
        .markdown-body ol {
            list-style-type: decimal;
            padding-left: 2em;
            margin-bottom: 1em;
        }
        .markdown-body li {
            margin-bottom: 0.25em;
        }
        .markdown-body code {
            padding: 0.25rem 0.5rem;
            margin: 0 0.25rem;
            background-color: #f0f4f8;
            border-radius: 6px;
            font-size: 0.9rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }
        .markdown-body pre {
            background-color: #f0f4f8;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1em;
            overflow-x: auto;
            font-size: 0.9rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            line-height: 1.5;
        }
        .markdown-body blockquote {
            border-left: 4px solid #1a73e8;
            padding-left: 1rem;
            margin-bottom: 1em;
            font-style: italic;
            color: #5f6368;
        }
        .material-icons {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
        }
        #button-container {
            display: flex;
            gap: 1rem;
            margin-left: 1rem;
        }
        .prompt-btn {
            flex: 1;
            margin-right: 0.21rem;
            border-radius: 2rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.3s;
            background-image: linear-gradient(to right, #b0e0e6, #87cefa); /* Light Blue Gradient */
            color: #fff;
            height: 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .prompt-btn:nth-of-type(odd) {
            background-image: linear-gradient(to right, #b0e0e6, #87cefa); /* Light Blue Gradient */
            color: #fff;
        }
        .prompt-btn:nth-of-type(odd):hover {
            background-image: linear-gradient(to right, #add8e6, #87ceeb);
            transform: translateY(-2px);
            box-shadow: 0 3px 7px rgba(0, 0, 0, 0.15);
        }
        .prompt-btn:nth-of-type(odd):active {
            background-image: linear-gradient(to right, #a9d3d1, #7ec0ee);
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        .prompt-btn:nth-of-type(even) {
            background-color: #f8f9fa;
            color: #202124;
        }
        .prompt-btn:nth-of-type(even):hover {
            background-color: #f1f3f4;
            transform: translateY(-2px);
            box-shadow: 0 3px 7px rgba(0, 0, 0, 0.15);
        }
        .prompt-btn:nth-of-type(even):active {
            background-color: #e8eaed;
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .chat-container {
                max-width: 100%;
                border-radius: 0;
                box-shadow: none;
                border: none;
            }
        }
        #help-fab {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  width: 56px;
  height: 56px;
  background-color: #4285F4;
  color: white;
  border-radius: 50%;
  box-shadow: 0 2px 5px rgba(0,0,0,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 1000;
}

#help-tooltip {
  position: fixed;
  bottom: 5.5rem;
  right: 1.5rem;
  background-color: #fff;
  color: #333;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
  display: none;
  z-index: 1000;
  font-size: 0.95rem;
}
    </style>
</head>
<body class="container">
    <!-- Floating Help Button -->
<div id="help-fab" title="Need help?" onclick="toggleHelpTooltip()">
    <span class="material-icons">help_outline</span>
  </div>
  <div id="help-tooltip">
    This is implementation of prompt. Also hacked version of puter js.!
  <a href="#" class="contrast" onclick="event.preventDefault;click">Click here</a> to copy the promp
  </div>
    <div class="chat-container">
        <div class="chat-header">
            <h1 class="logo-txt">AI Tutor</h1>
            <span class="text-sm">Online</span>
        </div>
        <div id="chat-messages" class="chat-messages">
        </div>
        <div class="chat-input-area">
            <input type="text" id="message-input" placeholder="Say hello or anything to start" tabindex="0" />
            <button id="send-button">
                <i class="material-icons">send</i>
            </button>
        </div>
    </div>
    <script src="puter.js"></script>
    <!-- <script src="https://js.puter.com/v2"></script> -->
    <script>
gsap.registerPlugin(SplitText);

        const puter = window.puter;
const promptMessage = `Purpose and Goals:
* Act as a helpful coach for learners on any topic they wish to explore.

* Guide the learner through a step-by-step learning process, ensuring comprehension at each stage.

* Provide opportunities for self-assessment through short quizzes.

* Offer adaptive learning by revisiting topics with simpler explanations and examples if needed.

* Conclude the learning session with a personalized 'Notebook' for the learner.

Behaviors and Rules:
1) Topic Selection:
 a) Begin by asking the learner: 'What topic would you like to learn today?'
 b) Provide a list of popular topics as example.
 c) Await the learner's response indicating the topic of interest.



2) Step-by-Step Guidance:

 a) Break down the chosen topic into manageable learning steps.

 b) Present the first step to the learner in a clear and concise manner.

 c) After presenting the step, ask: 'Have you completed this step?

3) Assessment and Progression:

 a) If the learner taps 'Yes':

    i) Ask for confirmation to proceed with a short quiz: 'Would you like a quick 5-question quiz to check your understanding?'

    ii) If the learner agrees, present a 5-question multiple-choice quiz related to the completed step.

    iii) If the learner disagrees, proceed directly to the next learning step.

 b) If the learner taps 'No':

 i) Revisit the current topic with easier context and more helpful examples.

 ii) Present the revised explanation and examples to the learner.

 iii) Again, ask: 'Have you completed this step?' with 'Yes' and 'No' buttons.


4) Iterative Learning:

 a) Continue the cycle of presenting steps, asking for completion, and offering quizzes or revised content until the learner consistently indicates 'Yes' and successfully completes the quizzes (if they agree to them).
 b) Ensure that the learner feels comfortable and supported throughout the process.

5) Final Result:

 a) Upon completion of the learning process for the chosen topic, present a visual representation of a 'Rsult' with a beautiful chart.
b) Include a summary of the learning journey, key points, and any quizzes taken.
 c) Encourage the learner to save or print the 'Notebook' for future reference.
Overall Tone:
* Button code for Yes=<button type="bytton"  onClick="addMessage('You', 'Yes')">Yes</button>
* Button code for No=<button   type="button" onClick="addMessage('You', 'No')">No</button>
* Maintain a helpful, patient, and encouraging tone throughout the interaction.
* Use clear and simple language, adapting to the learner's pace.
* Provide positive reinforcement and constructive feedback.
* Show enthusiasm for helping the learner understand the topic.`;

        const messages = [{content:promptMessage, role:'user'}];	

        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
messageInput.focus();

        const gradients = [
            { start: '#b0e0e6', end: '#87cefa' },  // Light Blue
            { start: '#dda0dd', end: '#d8bfd8' },  // Light Purple
        ];

        let currentGradientIndex = 0;
        const headerElement = document.querySelector('.chat-header');
        const sendButtonElement = document.querySelectorAll('button');

        function animateGradient() {
            const tl = gsap.timeline({ repeat: -1, yoyo: true });
            currentGradientIndex = (currentGradientIndex + 1) % gradients.length;
            const nextGradient = gradients[currentGradientIndex];

            tl.to(headerElement, {
                backgroundImage: `linear-gradient(to right, ${nextGradient.start}, ${nextGradient.end})`,
                duration: 2,
                ease: 'easeInOut'
            })
            .to(sendButtonElement, {
                backgroundImage: `linear-gradient(to right, ${nextGradient.start}, ${nextGradient.end})`,
                duration: 2,
                ease: 'easeInOut'
            });
            SplitText.create(".logo-txt", {
  type: "words, chars",
  onSplit(self) { // runs every time it splits
    gsap.from(self.chars, {
      duration: 1, 
      y: 100, 
      autoAlpha: 0, 
      stagger: 0.05
    });
  }
});
        }

        animateGradient();
        setInterval(animateGradient, 2000);

        function addMessage(sender, message) {
            if(sender === 'You') {
                messages.push({ content: message, role: 'user' });
                puter.ai.chat(messages).then(response => {
                    addMessage('Tutor', response.message);
                }).catch(error => {
                    console.error("AI response error:", error);
                });

            } else {
                messages.push(message);
                message=message.content;
            }
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(sender === 'You' ? 'sent-message' : 'received-message');
            const html = marked.parse(message, { breaks: true, smartypants: true });
            messageElement.innerHTML = html;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            messageInput.focus();
        }
        sendButton.addEventListener('click', () => {
            const message = messageInput.value.trim();
            if (message !== '') {
                addMessage('You', message);
                messageInput.value = '';
            }
        });

        messageInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                sendButton.click();
            }
        });


        function removeLocalStorageKey(key) {
                localStorage.removeItem(key);
                console.log(`Local storage key "${key}" has been removed.`);
            }
            removeLocalStorageKey('puter.auth.token');
            function toggleHelpTooltip() {
    const tooltip = document.getElementById('help-tooltip');
    tooltip.style.display = tooltip.style.display === 'block' ? 'none' : 'block';
}
function copyPromptToClipboard() {
    navigator.clipboard.writeText(promptMessage)
        .then(() => {
            const tooltip = document.getElementById('help-tooltip');
            prevHtml = tooltip.innerHTML;
            tooltip.innerText = 'âœ… Prompt copied!';
            setTimeout(() => {
                tooltip.innerHTML = prevHtml;
            }, 2000);
        })
        .catch(err => {
            console.error('Clipboard error:', err);
        });
}
    </script>
</body>
</html>
