<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ai Tutor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.0/lib/marked.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <style>
        body {
            font-family: 'Google Sans', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #f3f4f7;
        }
        .container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .chat-container {
            flex: 0 0 auto;
            width: 100%;
            max-width: 600px;
            margin: auto;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #fff;
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
        }
        .chat-header {
            flex: 0 0 auto;
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            background: #fff;
            color: #202124;
            display: flex;
            align-items: center;
        }
        .chat-header h1 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 500;
        }
        .chat-header span {
            margin-left: 0.75rem;
            font-size: 0.875rem;
            color: #5f6368;
        }
        .chat-messages {
            flex: 1 1 auto;
            overflow-y: auto;
            padding: 1rem 1.5rem;
        }
        .chat-input-area {
            flex: 0 0 auto;
            padding: 1.25rem 1.5rem;
            border-top: 1px solid #e2e8f0;
            background-color: #fff;
            display: flex;
            align-items: center;
        }
        .message {
            padding: 0.75rem 1rem;
            border-radius: 1.5rem;
            margin-bottom: 0.75rem;
            max-width: 90%;
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            font-size: 1rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .message:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .sent-message {
            background: linear-gradient(90deg, #b0e0e6 0%, #87cefa 100%);  /* Light Blue */
            color: #00008b;
            margin-left: auto;
            border-top-right-radius: 0.25rem;
            border-bottom-right-radius: 0.25rem;
        }
        .received-message {
            background: linear-gradient(90deg, #dda0dd 0%, #d8bfd8 100%);  /* Light Purple */
            color: #4b0082;
            margin-right: auto;
            border-top-left-radius: 0.25rem;
            border-bottom-left-radius: 0.25rem;
        }
        #message-input {
            flex: 1;
            border-radius: 2rem;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            height: 3rem;
            font-size: 1rem;
            border: 1px solid #e0e0e0;
            outline: none;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        #message-input:focus {
            border-color: #1a73e8;
            box-shadow: 0 0 0 4px rgba(26, 115, 232, 0.1);
        }
        #send-button {
            border-radius: 2rem;
            padding-left: 1.75rem;
            padding-right: 1.75rem;
            height: 3rem;
            font-size: 1rem;
            background-image: linear-gradient(to right, #b0e0e6, #87cefa); /* Light Blue Gradient */
            color: #fff;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }
        #send-button:hover {
            background-image: linear-gradient(to right, #add8e6, #87ceeb);
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
        }
        #send-button:active {
            background-image: linear-gradient(to right, #a9d3d1, #7ec0ee);
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        #message-input::placeholder {
            color: #9b9b9b;
            font-size: 1rem;
        }
        .markdown-body {
            font-family: 'Google Sans', sans-serif;
            font-size: 1rem;
            line-height: 1.75;
            color: #202124;
        }
        .markdown-body h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #202124;
            font-weight: 700;
        }
        .markdown-body h2 {
            font-size: 2rem;
            margin-bottom: 0.8rem;
            color: #202124;
            font-weight: 600;
        }
        .markdown-body h3 {
            font-size: 1.5rem;
            margin-bottom: 0.6rem;
            color: #202124;
            font-weight: 500;
        }
        .markdown-body p {
            margin-bottom: 1rem;
        }
        .markdown-body strong {
            font-weight: 600;
            color: #202124;
        }
        .markdown-body a {
            color: #1a73e8;
            text-decoration: none;
        }
        .markdown-body a:hover {
            text-decoration: underline;
        }
        .markdown-body ul {
            list-style-type: disc;
            padding-left: 2em;
            margin-bottom: 1em;
        }
        .markdown-body ol {
            list-style-type: decimal;
            padding-left: 2em;
            margin-bottom: 1em;
        }
        .markdown-body li {
            margin-bottom: 0.25em;
        }
        .markdown-body code {
            padding: 0.25rem 0.5rem;
            margin: 0 0.25rem;
            background-color: #f0f4f8;
            border-radius: 6px;
            font-size: 0.9rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }
        .markdown-body pre {
            background-color: #f0f4f8;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1em;
            overflow-x: auto;
            font-size: 0.9rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            line-height: 1.5;
        }
        .markdown-body blockquote {
            border-left: 4px solid #1a73e8;
            padding-left: 1rem;
            margin-bottom: 1em;
            font-style: italic;
            color: #5f6368;
        }
        .material-icons {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
        }
        #button-container {
            display: flex;
            gap: 1rem;
            margin-left: 1rem;
        }
        .prompt-btn {
            WIDTH: 3rem;
            margin-right: .21rem;
            border-radius: 2rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            border: none;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.3s;
        }
        .prompt-btn:nth-of-type(odd) {
            background-image: linear-gradient(to right, #b0e0e6, #87cefa); /* Light Blue Gradient */
            color: #fff;
        }
        .prompt-btn:nth-of-type(odd):hover {
            background-image: linear-gradient(to right, #add8e6, #87ceeb);
            transform: translateY(-2px);
            box-shadow: 0 3px 7px rgba(0, 0, 0, 0.15);
        }
        .prompt-btn:nth-of-type(odd):active {
            background-image: linear-gradient(to right, #a9d3d1, #7ec0ee);
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }
        .prompt-btn:nth-of-type(even) {
            background-color: #f8f9fa;
            color: #202124;
        }
        .prompt-btn:nth-of-type(even):hover {
            background-color: #f1f3f4;
            transform: translateY(-2px);
            box-shadow: 0 3px 7px rgba(0, 0, 0, 0.15);
        }
        .prompt-btn:nth-of-type(even):active {
            background-color: #e8eaed;
            transform: translateY(0);
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 768px) {
            .chat-container {
                max-width: 100%;
                border-radius: 0;
                box-shadow: none;
                border: none;
            }
        }
    </style>
</head>
<body class="container">
    <div class="chat-container">
        <div class="chat-header">
            <h1>AI Tutor</h1>
            <span class="text-sm">Online</span>
        </div>
        <div id="chat-messages" class="chat-messages">
        </div>
        <div class="chat-input-area">
            <input type="text" id="message-input" placeholder="Type your message..." />
            <button id="send-button">
                <i class="material-icons">send</i>
            </button>
        </div>
    </div>
    <script src="https://js.puter.com/v2/"></script>
    <script>


function forceClickShadowElement(shadowHostSelector, elementId) {
  // 1. Find the host element that contains the shadow root.
  const shadowHost = document.querySelector(shadowHostSelector);

  if (shadowHost) {
    // 2. Access the shadow root.
    const shadowRoot = shadowHost.shadowRoot;

    if (shadowRoot) {
      // 3. Find the element within the shadow root.
      const shadowElement = shadowRoot.getElementById(elementId);

      if (shadowElement) {
        // 4. Click the element.
        shadowElement.click();
        console.log(`Successfully force-clicked shadow element with ID: ${elementId} within host: ${shadowHostSelector}`);
        return true;
      } else {
        console.log(`Shadow element with ID "${elementId}" not found within the shadow root of host: ${shadowHostSelector}`);
        return false;
      }
    } else {
      console.log(`No shadow root found on the host element with selector: ${shadowHostSelector}`);
      return false;
    }
  } else {
    console.log(`Host element with selector "${shadowHostSelector}" not found.`);
    return false;
  }
}

forceClickShadowElement('puter-dialog', 'launch-auth-popup');

        const puter = window.puter;
const promptMessage = `Purpose and Goals:
* Act as a helpful coach for learners on any topic they wish to explore.

* Guide the learner through a step-by-step learning process, ensuring comprehension at each stage.

* Provide opportunities for self-assessment through short quizzes.

* Offer adaptive learning by revisiting topics with simpler explanations and examples if needed.

* Conclude the learning session with a personalized 'Notebook' for the learner.

Behaviors and Rules:
1) Topic Selection:
 a) Begin by asking the learner: 'What topic would you like to learn today?'
 b) Provide a list of popular topics as example.
 c) Await the learner's response indicating the topic of interest.



2) Step-by-Step Guidance:

 a) Break down the chosen topic into manageable learning steps.

 b) Present the first step to the learner in a clear and concise manner.

 c) After presenting the step, ask: 'Have you completed this step?

3) Assessment and Progression:

 a) If the learner taps 'Yes':

    i) Ask for confirmation to proceed with a short quiz: 'Would you like a quick 5-question quiz to check your understanding?'

    ii) If the learner agrees, present a 5-question multiple-choice quiz related to the completed step.

    iii) If the learner disagrees, proceed directly to the next learning step.

 b) If the learner taps 'No':

 i) Revisit the current topic with easier context and more helpful examples.

 ii) Present the revised explanation and examples to the learner.

 iii) Again, ask: 'Have you completed this step?' with 'Yes' and 'No' buttons.


4) Iterative Learning:

 a) Continue the cycle of presenting steps, asking for completion, and offering quizzes or revised content until the learner consistently indicates 'Yes' and successfully completes the quizzes (if they agree to them).
 b) Ensure that the learner feels comfortable and supported throughout the process.

5) Final Result:

 a) Upon completion of the learning process for the chosen topic, present a visual representation of a 'Rsult' with a beautiful chart.
b) Include a summary of the learning journey, key points, and any quizzes taken.
 c) Encourage the learner to save or print the 'Notebook' for future reference.
Overall Tone:
* Button code for Yes=<button class ="prompt-btn" onClick="addMessage('You', 'Yes')">Yes</button>
* Button code for No=<button  class ="prompt-btn"  onClick="addMessage('You', 'No')">No</button>
* Maintain a helpful, patient, and encouraging tone throughout the interaction.
* Use clear and simple language, adapting to the learner's pace.
* Provide positive reinforcement and constructive feedback.
* Show enthusiasm for helping the learner understand the topic.`;

        const messages = [{content:promptMessage, role:'user'}];	

        const chatMessages = document.getElementById('chat-messages');
        const messageInput = document.getElementById('message-input');
        const sendButton = document.getElementById('send-button');
        const yesButton = document.getElementById('yes-button');
        const noButton = document.getElementById('no-button');

        const gradients = [
            { start: '#b0e0e6', end: '#87cefa' },  // Light Blue
            { start: '#dda0dd', end: '#d8bfd8' },  // Light Purple
        ];

        let currentGradientIndex = 0;
        const headerElement = document.querySelector('.chat-header');
        const sendButtonElement = document.getElementById('send-button');

        function animateGradient() {
            currentGradientIndex = (currentGradientIndex + 1) % gradients.length;
            const nextGradient = gradients[currentGradientIndex];

            gsap.to(headerElement, {
                backgroundImage: `linear-gradient(to right, ${nextGradient.start}, ${nextGradient.end})`,
                duration: 2,
                ease: 'easeInOut'
            });

            gsap.to(sendButtonElement, {
                backgroundImage: `linear-gradient(to right, ${nextGradient.start}, ${nextGradient.end})`,
                duration: 2,
                ease: 'easeInOut'
            });
        }

        animateGradient();
        setInterval(animateGradient, 2000);

        puter.ai.chat(messages,{model: 'grok-beta'});
        addMessage('You','Start');
        function addMessage(sender, message) {
            if(sender === 'You') {
                messages.push({ content: message, role: 'user' });
                puter.ai.chat(messages,{model: 'grok-beta'}).then(response => {
                    addMessage('Tutor', response.message);
                }).catch(error => {
                    console.error("AI response error:", error);
                });

            } else {
                messages.push(message);
                message=message.content;
            }
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(sender === 'You' ? 'sent-message' : 'received-message');
            const html = marked.parse(message, { breaks: true, smartypants: true });
            messageElement.innerHTML = `<div class="markdown-body">${html}</div>`;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        sendButton.addEventListener('click', () => {
            const message = messageInput.value.trim();
            if (message !== '') {
                addMessage('You', message);
                messageInput.value = '';
            }
        });

        messageInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                sendButton.click();
            }
        });

        yesButton.addEventListener('click', () => {
            addMessage('You', 'Yes');
        });

        noButton.addEventListener('click', () => {
            addMessage('You', 'No');
        });
    </script>
</body>
</html>
